<!doctype html>
<html><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=53864&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-3ZRK4KWSBR"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-3ZRK4KWSBR');
    </script>

    
    <script src="https://kit.fontawesome.com/68345f7fdb.js" crossorigin="anonymous"></script>

    
   <link rel="stylesheet" href="http://localhost:53864/style.css">



    
    
    <title>Rick Wysocki | Conditional Image Layouts in Hugo</title>

    
    <meta property="og:title" content="Conditional Image Layouts in Hugo" />
<meta property="og:description" content="This post describes how to write conditional image layouts using Go and HTML for a Hugo site." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:53864/posts/2023/07/conditional-image-layouts-in-hugo/" /><meta property="og:image" content="http://localhost:53864/posts/2023/07/conditional-image-layouts-in-hugo/featured.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-20T08:40:22-05:00" />
<meta property="article:modified_time" content="2023-07-20T08:40:22-05:00" />


    <meta name="author" content="Rick Wysocki"/>




</head>
<body class="p-4"><nav class="prose mt-4 text-xl max-w-4xl mx-auto mt-8">
  <ul class="hidden md:flex flex-row pl-0 justify-start items-center gap-4 mt-0">

    
    <li class="list-none"><a href="/"><img class= "my-4 mx-auto h-7 rounded-full" src="/images/ghost.png" /></a></li>


    

    <li class="list-none "><a href="/" class="no-underline group transition duration-300">

      
      Home
    <span class="block max-w-0 group-hover:max-w-full transition-all duration-500 h-0.5 bg-indigo-600"></span>
    </a></li>
    

    <li class="list-none "><a href="/posts/" class="no-underline group transition duration-300">

      
      Posts
    <span class="block max-w-0 group-hover:max-w-full transition-all duration-500 h-0.5 bg-indigo-600"></span>
    </a></li>
    

    <li class="list-none "><a href="/portfolio/" class="no-underline group transition duration-300">

      
      Portfolio
    <span class="block max-w-0 group-hover:max-w-full transition-all duration-500 h-0.5 bg-indigo-600"></span>
    </a></li>
    


  </ul>

  
  <div class="md:hidden flex justify-between">
  	<button class="outline-none mobile-menu-button">
  		<svg
  			class="w-6 h-6 text-gray-500"
  			x-show="!showMenu"
  			fill="none"
  			stroke-linecap="round"
  			stroke-linejoin="round"
  			stroke-width="2"
  			viewBox="0 0 24 24"
  			stroke="currentColor"
  		>
  		<path d="M4 6h16M4 12h16M4 18h16"></path>
  		</svg>
  	</button>
    <div>
    <li class="list-none"><a href="/"><img class= "my-4 mx-auto h-7 rounded-full" src="/images/ghost.png" /></a></li>
    </div>
  </div>

  
<div class="hidden mobile-menu">
	<ul class="py-6">
    

		<li class="list-none"><a href="/" class="block text-md py-1 underline decoration-indigo-500">
      
      Home
    </a></li>

    

		<li class="list-none"><a href="/posts/" class="block text-md py-1 underline decoration-indigo-500">
      
      Posts
    </a></li>

    

		<li class="list-none"><a href="/portfolio/" class="block text-md py-1 underline decoration-indigo-500">
      
      Portfolio
    </a></li>

    
</ul>
</div>

<script>
	
	const btn = document.querySelector("button.mobile-menu-button");
	const menu = document.querySelector(".mobile-menu");

	
	btn.addEventListener("click", () => {
	menu.classList.toggle("hidden");
	});
</script>
</nav>



  <div class="mx-auto">

    
<div class="prose text-xl prose-a:text-indigo-600 leading-7 mx-auto mt-8">


<h1>Conditional Image Layouts in Hugo</h1>




<img
    src="/posts/2023/07/conditional-image-layouts-in-hugo/featured_hub82f42fb95f1d64bca0c36257b4b31ab_148728_1000x0_resize_box_3.png"
    alt="A screenshot of some of the code from this tutorial."
/>






  
  <div class="flex flex-row gap-4 items-center">
    <i class="fa fa-calendar"></i>
    <p class="my-0 text-gray-600">July 20, 2023</p>
  </div>
  
  
  
<div class="flex flex-row gap-4 items-center">
  <i class="fa fa-tag"></i>
  
  
    <a class="my-0 text-gray-600" href="/tags/web-development">Web Development</a>
  
    <a class="my-0 text-gray-600" href="/tags/hugo">Hugo</a>
  
</div>


<h2 id="introduction">Introduction</h2>
<p>In this tutorial, I describe how to write conditional image layouts using <a href="https://go.dev/">Go</a> and HTML for a <a href="https://gohugo.io">Hugo</a> site.</p>
<p>When I started designing <a href="https://github.com/rickwysocki/littleGhost">Little Ghost</a>, my Hugo theme, I wanted to conditionally insert featured images based on parameters called in a page&rsquo;s front matter and the site configuration file. Hugo&rsquo;s <a href="https://gohugo.io/content-management/shortcodes/#figure">figure shortcode</a> was an option, but I wanted something more automatic. I learned how easy this can be in Hugo.</p>
<h2 id="part-1-featured-images-for-pages-basic">Part 1: Featured Images for Pages (Basic)</h2>
<p>There were several criteria I wanted in to implement for featured image layouts. I wanted Hugo to:</p>
<ul>
<li>Check the page&rsquo;s front matter for a featured image.</li>
<li>Pull a declared featured image into the layout as a resource.</li>
<li>Allow the user to include alt text for the image within the front matter.</li>
</ul>
<p>Finally, I wanted this to be <strong>optional</strong>. If no front matter is declared, no HTML should be rendered for the image layout.</p>
<h3 id="building-the-featured-image-layout">Building the Featured Image Layout</h3>
<p>First, let&rsquo;s look at the code/markup. I&rsquo;ll explain each line below.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>{{ <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">isset</span> .<span style="color:#a6e22e">Params</span> <span style="color:#e6db74">&#34;featured_image&#34;</span> }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{{ <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">image</span> <span style="color:#f92672">:=</span> .<span style="color:#a6e22e">Resources</span>.<span style="color:#a6e22e">GetMatch</span> .<span style="color:#a6e22e">Params</span>.<span style="color:#a6e22e">featured_image</span> }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#a6e22e">img</span>
</span></span><span style="display:flex;"><span>    {{ <span style="color:#a6e22e">with</span> <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">image</span> }}<span style="color:#a6e22e">src</span>=<span style="color:#e6db74">&#34;{{$image.RelPermalink }}&#34;</span>{{<span style="color:#a6e22e">end</span>}}
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">alt</span>=<span style="color:#e6db74">&#34;{{ .Params.featured_alt }}&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">/</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{{ <span style="color:#a6e22e">end</span> }}
</span></span></code></pre></div><p>So, what is each line doing here?</p>
<p>First, we ask Hugo to check whether a <code>featured_image</code> is set in the front matter. If not, everything else will be ignored:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>{{ <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">isset</span> .<span style="color:#a6e22e">Params</span> <span style="color:#e6db74">&#34;featured_image&#34;</span> }}
</span></span></code></pre></div><p>Assuming we have declared a featured image, we then want to access it as a page resource. This is important because, as described in <a href="https://gohugo.io/content-management/page-resources/">the Hugo documentation</a>, page resource files get a page-relative URL, which simplifies the front matter we need to write. We will also see that getting our image as a page resource will let us make creative use of Hugo&rsquo;s image-processing methods.</p>
<p>So, what we want to do is:</p>
<ol>
<li>Get <code>featured_image</code>.</li>
<li>Ensure that we are acessing it as a <em>page resource</em>.</li>
<li>Store the image as a variable that we can use in our page layout.</li>
</ol>
<p>The next line accomplishes all three of these tasks:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>{{ <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">image</span> <span style="color:#f92672">:=</span> .<span style="color:#a6e22e">Resources</span>.<span style="color:#a6e22e">GetMatch</span> .<span style="color:#a6e22e">Params</span>.<span style="color:#a6e22e">featured_image</span> }}
</span></span></code></pre></div><p>We now have our image as a resource, but we haven&rsquo;t created its display. Let&rsquo;s create create an <code>&lt;img&gt;</code> layout that calls in the resource.</p>
<p>First, we&rsquo;ll open (and leave open) the image tag:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">img</span>
</span></span></code></pre></div><p>Then, like any image tag, we need to include the source for the file. This is easy, since we&rsquo;ve called the image as a resource and assigned it to a variable: we just need to add <code>.RelPermalink</code> to get the URL.</p>
<p>The only slight twist is that we need to set the scope for the image&rsquo;s source permalink carefully so that we can also declare the alt text using a separate front matter parameter. We will include <code>{{ with }} ... {{ end }}</code> around <em>only</em> the <code>src</code> line and close the image tag afterward:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>&lt;<span style="color:#a6e22e">img</span>
</span></span><span style="display:flex;"><span>    {{ <span style="color:#a6e22e">with</span> <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">image</span> }}<span style="color:#a6e22e">src</span>=<span style="color:#e6db74">&#34;{{$image.RelPermalink }}&#34;</span>{{<span style="color:#a6e22e">end</span>}}
</span></span><span style="display:flex;"><span><span style="color:#f92672">/</span>&gt;
</span></span></code></pre></div><p>Now, let&rsquo;s also include set up alt text for our image, which can be declared using the <code>featured_alt</code> parameter in the front matter:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#a6e22e">alt</span>=<span style="color:#e6db74">&#34;{{ .Params.featured_alt }}&#34;</span>
</span></span></code></pre></div><p>Finally, we just need to close the conditional statement we started at the beginning of the block with <code>{{ end }}</code>. Here&rsquo;s the whole block again:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>{{ <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">isset</span> .<span style="color:#a6e22e">Params</span> <span style="color:#e6db74">&#34;featured_image&#34;</span> }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{{ <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">image</span> <span style="color:#f92672">:=</span> .<span style="color:#a6e22e">Resources</span>.<span style="color:#a6e22e">GetMatch</span> .<span style="color:#a6e22e">Params</span>.<span style="color:#a6e22e">featured_image</span> }}
</span></span><span style="display:flex;"><span>&lt;<span style="color:#a6e22e">img</span>
</span></span><span style="display:flex;"><span>    {{ <span style="color:#a6e22e">with</span> <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">image</span> }}<span style="color:#a6e22e">src</span>=<span style="color:#e6db74">&#34;{{$image.RelPermalink }}&#34;</span>{{<span style="color:#a6e22e">end</span>}}
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">alt</span>=<span style="color:#e6db74">&#34;{{ .Params.featured_alt }}&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">/</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{{ <span style="color:#a6e22e">end</span> }}
</span></span></code></pre></div><p>Once you&rsquo;ve written this into your page layout file, <strong>all you&rsquo;ll ever have to do</strong> is include the following two lines in your page front matter:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span><span style="color:#f92672">featured_image</span>: <span style="color:#ae81ff">image.jpg</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">featured_alt</span>: <span style="color:#e6db74">&#34;Your alt text.&#34;</span>
</span></span><span style="display:flex;"><span>---
</span></span></code></pre></div><p>It&rsquo;s that easy!</p>
<h2 id="conditional-images-and-image-processing-in-list-pages">Conditional Images and Image Processing in List Pages</h2>
<p>We can also expand the basic layout and front matter parameters we created to write a dynamic and intelligent image layout for a list page. This page will range over relevant content and return an optimized featured image. A good example of (actually the best example, since we&rsquo;ll be recreating a small part of it) is the <a href="/posts/">Posts page</a> for this website.</p>
<h3 id="the-full-markup--code">The Full Markup / Code</h3>
<p>First, let&rsquo;s look at the markup / code for a <em>full grid layout</em> of blog posts. Ignore the Tailwind CSS classes, which are irrelevant.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>{{ <span style="color:#66d9ef">range</span> (.<span style="color:#a6e22e">Paginate</span> ( .<span style="color:#a6e22e">Pages</span>.<span style="color:#a6e22e">ByDate</span>.<span style="color:#a6e22e">Reverse</span> )).<span style="color:#a6e22e">Pages</span> }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#a6e22e">article</span> <span style="color:#a6e22e">class</span>=<span style="color:#e6db74">&#34;p-6 shadow-lg flex flex-col&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        {{ <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">isset</span> .<span style="color:#a6e22e">Params</span> <span style="color:#e6db74">&#34;featured_image&#34;</span> }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>          {{ <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">image</span> <span style="color:#f92672">:=</span> .<span style="color:#a6e22e">Resources</span>.<span style="color:#a6e22e">GetMatch</span> .<span style="color:#a6e22e">Params</span>.<span style="color:#a6e22e">featured_image</span> }}
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#a6e22e">a</span> <span style="color:#a6e22e">href</span>=<span style="color:#e6db74">&#34;{{ .RelPermalink }}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#a6e22e">img</span>
</span></span><span style="display:flex;"><span>                {{ <span style="color:#a6e22e">with</span> <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">image</span> }}<span style="color:#a6e22e">src</span>=<span style="color:#e6db74">&#34;{{ (($image.Crop &#34;</span><span style="color:#ae81ff">1200</span><span style="color:#a6e22e">x800</span><span style="color:#e6db74">&#34;).Resize &#34;</span><span style="color:#ae81ff">600</span><span style="color:#a6e22e">x</span><span style="color:#e6db74">&#34;).RelPermalink }}&#34;</span>{{ <span style="color:#a6e22e">end</span> }}
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">alt</span>=<span style="color:#e6db74">&#34;{{ .Params.featured_alt }}&#34;</span><span style="color:#f92672">/</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">/</span><span style="color:#a6e22e">a</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        {{ <span style="color:#66d9ef">else</span> }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        {{ <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">image</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">resources</span>.<span style="color:#a6e22e">Get</span> .<span style="color:#a6e22e">Site</span>.<span style="color:#a6e22e">Params</span>.<span style="color:#a6e22e">post_image</span> }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#a6e22e">a</span> <span style="color:#a6e22e">href</span>=<span style="color:#e6db74">&#34;{{ .RelPermalink }}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#a6e22e">img</span> 
</span></span><span style="display:flex;"><span>                {{ <span style="color:#a6e22e">with</span> <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">image</span> }}<span style="color:#a6e22e">src</span>=<span style="color:#e6db74">&#34;{{ (($image.Crop &#34;</span><span style="color:#ae81ff">1200</span><span style="color:#a6e22e">x800</span><span style="color:#e6db74">&#34;).Resize &#34;</span><span style="color:#ae81ff">60</span><span style="color:#a6e22e">x</span><span style="color:#e6db74">&#34;).RelPermalink }}&#34;</span> {{ <span style="color:#a6e22e">end</span> }} 
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">alt</span>=<span style="color:#e6db74">&#34;{{ .Site.Params.post_image_alt }}&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">/</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">/</span><span style="color:#a6e22e">a</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        {{ <span style="color:#a6e22e">end</span> }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#a6e22e">div</span> <span style="color:#a6e22e">class</span>=<span style="color:#e6db74">&#34;grow&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#a6e22e">h3</span> <span style="color:#a6e22e">class</span>=<span style="color:#e6db74">&#34;font-bold text-xl mt-2&#34;</span>&gt;&lt;<span style="color:#a6e22e">a</span> <span style="color:#a6e22e">href</span>=<span style="color:#e6db74">&#34;{{ .RelPermalink }}&#34;</span>&gt;{{ .<span style="color:#a6e22e">Title</span> }}&lt;<span style="color:#f92672">/</span><span style="color:#a6e22e">a</span>&gt;&lt;<span style="color:#f92672">/</span><span style="color:#a6e22e">h3</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#a6e22e">p</span> <span style="color:#a6e22e">class</span>=<span style="color:#e6db74">&#34;mb-4&#34;</span>&gt;{{ .<span style="color:#a6e22e">Params</span>.<span style="color:#a6e22e">summary</span> }}&lt;<span style="color:#f92672">/</span><span style="color:#a6e22e">p</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">/</span><span style="color:#a6e22e">div</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#a6e22e">div</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#a6e22e">a</span> <span style="color:#a6e22e">href</span>=<span style="color:#e6db74">&#34;{{ .RelPermalink }}&#34;</span> <span style="color:#a6e22e">class</span>=<span style="color:#e6db74">&#34;p-2 rounded-lg bg-indigo-600 text-white&#34;</span>&gt;<span style="color:#a6e22e">Read</span> <span style="color:#a6e22e">More</span>&lt;<span style="color:#f92672">/</span><span style="color:#a6e22e">a</span>&gt;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">/</span><span style="color:#a6e22e">div</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">/</span><span style="color:#a6e22e">article</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  {{ <span style="color:#a6e22e">end</span> }}
</span></span></code></pre></div><p>To summarize: this code block creates a layout where Hugo will range over every relevant page and, for each one, produce a grid item containing:</p>
<ul>
<li>a featured image,</li>
<li>a summary,</li>
<li>and a &ldquo;Read More&rdquo; button.</li>
</ul>
<p>The main thing you need to understand is that all of this is surrounded by:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>{{ <span style="color:#66d9ef">range</span> (.<span style="color:#a6e22e">Paginate</span> ( .<span style="color:#a6e22e">Pages</span>.<span style="color:#a6e22e">ByDate</span>.<span style="color:#a6e22e">Reverse</span> )).<span style="color:#a6e22e">Pages</span> }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{{{ <span style="color:#a6e22e">end</span> }}}
</span></span></code></pre></div><p>What this code broadly states (beyond some pagination information) is that Hugo is going to range over every relevant page and create whatever is included between the tags.</p>
<h3 id="back-to-the-images">Back to the Images</h3>
<p>So, back to our focus: the featured image. We <em>could</em> simply copy the image layout we created above. But we want something beyond the basics. Specifically:</p>
<ol>
<li>We want all these images to be the same size, automatically, so that they look nice together.</li>
<li>We want a way to increase page load time. This is going to be a lot of images loading on a single list page.</li>
<li>We want a backup image even if a page <em>doesn&rsquo;t</em> have a featured image assigned. A single page without a featured image is fine, but inconsistency on a list page never looks great.</li>
<li>We don&rsquo;t want to write any extra front matter beyond what we&rsquo;ve included for the single layout above.</li>
</ol>
<p>This is all surprisingly simple. Let&rsquo;s take a closer look at the image-related part of the markup / code above:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>{{ <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">isset</span> .<span style="color:#a6e22e">Params</span> <span style="color:#e6db74">&#34;featured_image&#34;</span> }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    {{ <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">image</span> <span style="color:#f92672">:=</span> .<span style="color:#a6e22e">Resources</span>.<span style="color:#a6e22e">GetMatch</span> .<span style="color:#a6e22e">Params</span>.<span style="color:#a6e22e">featured_image</span> }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#a6e22e">a</span> <span style="color:#a6e22e">href</span>=<span style="color:#e6db74">&#34;{{ .RelPermalink }}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#a6e22e">img</span>
</span></span><span style="display:flex;"><span>            {{ <span style="color:#a6e22e">with</span> <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">image</span> }}<span style="color:#a6e22e">src</span>=<span style="color:#e6db74">&#34;{{ (($image.Crop &#34;</span><span style="color:#ae81ff">1200</span><span style="color:#a6e22e">x800</span><span style="color:#e6db74">&#34;).Resize &#34;</span><span style="color:#ae81ff">600</span><span style="color:#a6e22e">x</span><span style="color:#e6db74">&#34;).RelPermalink }}&#34;</span>{{ <span style="color:#a6e22e">end</span> }}
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">alt</span>=<span style="color:#e6db74">&#34;{{ .Params.featured_alt }}&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">/</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">/</span><span style="color:#a6e22e">a</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{{ <span style="color:#66d9ef">else</span> }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    {{ <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">image</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">resources</span>.<span style="color:#a6e22e">Get</span> .<span style="color:#a6e22e">Site</span>.<span style="color:#a6e22e">Params</span>.<span style="color:#a6e22e">post_image</span> }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#a6e22e">a</span> <span style="color:#a6e22e">href</span>=<span style="color:#e6db74">&#34;{{ .RelPermalink }}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#a6e22e">img</span> 
</span></span><span style="display:flex;"><span>            {{ <span style="color:#a6e22e">with</span> <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">image</span> }}<span style="color:#a6e22e">src</span>=<span style="color:#e6db74">&#34;{{ (($image.Crop &#34;</span><span style="color:#ae81ff">1200</span><span style="color:#a6e22e">x800</span><span style="color:#e6db74">&#34;).Resize &#34;</span><span style="color:#ae81ff">600</span><span style="color:#a6e22e">x</span><span style="color:#e6db74">&#34;).RelPermalink }}&#34;</span> {{ <span style="color:#a6e22e">end</span> }}
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">alt</span>=<span style="color:#e6db74">&#34;{{ .Site.Params.post_image_alt }}&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">/</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">/</span><span style="color:#a6e22e">a</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{{ <span style="color:#a6e22e">end</span> }}
</span></span></code></pre></div><p>Much of this should hopefully look familiar to you now. To summarize the first half of the block:</p>
<ol>
<li>We&rsquo;re checking to see if a featured image has been set. If it has, we call it as a resource into a variable.</li>
<li>We&rsquo;re now surrounding the image with an <code>&lt;a href=&quot;{{ .RelPermalink }}&quot;&gt;&lt;/a&gt;</code> tag so that clicking the image takes us to the page itself. Note that how we are still in the page scope, so <code>.RelPermalink</code> is returning the link to the page, not the image.</li>
<li>We&rsquo;re including the image source and the correct scope using <code>{{ with $image }}{{ end }}</code>.</li>
<li>We&rsquo;re getting the alt text from the front matter and inserting it into the HTML.</li>
</ol>
<p>Now let&rsquo;s look at the second half, which starts at the <code>{{ else }}</code> line:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>{{ <span style="color:#66d9ef">else</span> }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    {{ <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">image</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">resources</span>.<span style="color:#a6e22e">Get</span> .<span style="color:#a6e22e">Site</span>.<span style="color:#a6e22e">Params</span>.<span style="color:#a6e22e">post_image</span> }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#a6e22e">a</span> <span style="color:#a6e22e">href</span>=<span style="color:#e6db74">&#34;{{ .RelPermalink }}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#a6e22e">img</span> 
</span></span><span style="display:flex;"><span>            {{ <span style="color:#a6e22e">with</span> <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">image</span> }}<span style="color:#a6e22e">src</span>=<span style="color:#e6db74">&#34;{{ (($image.Crop &#34;</span><span style="color:#ae81ff">1200</span><span style="color:#a6e22e">x800</span><span style="color:#e6db74">&#34;).Resize &#34;</span><span style="color:#ae81ff">60</span><span style="color:#a6e22e">x</span><span style="color:#e6db74">&#34;).RelPermalink }}&#34;</span> {{ <span style="color:#a6e22e">end</span> }}
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">alt</span>=<span style="color:#e6db74">&#34;{{ .Site.Params.post_image_alt }}&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">/</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">/</span><span style="color:#a6e22e">a</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{{ <span style="color:#a6e22e">end</span> }}
</span></span></code></pre></div><p>Note that we&rsquo;re calling something different into our variable here: <code>.Site.Params.post_image</code>. What this block is saying is that if a featured_image <strong>hasn&rsquo;t</strong> been called on a page, Hugo should go get a default image declared in your configuration file title <code>post_image</code>. Again, you can include also define the alt text there as <code>post_image_alt</code>. In your config file, it would look like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span><span style="color:#a6e22e">post_image</span> = <span style="color:#e6db74">&#39;images/image.png&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">post_image_alt</span> = <span style="color:#e6db74">&#39;Alt text.&#39;</span>
</span></span></code></pre></div><p>Note that I&rsquo;m using a config.toml file, so the specific syntax might vary since Hugo allows for YAML, TOML, or JSON. This won&rsquo;t have any effect on the layouts we&rsquo;ve created.</p>
<h3 id="processing-our-images">Processing Our Images</h3>
<p>We&rsquo;re in the home stretch now. There&rsquo;s one small piece that we haven&rsquo;t talked about, but it&rsquo;s doing some essential work. Note the methods we&rsquo;ve added when calling our image:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>{{ ((<span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">image</span>.<span style="color:#a6e22e">Crop</span> <span style="color:#e6db74">&#34;1200x800&#34;</span>).<span style="color:#a6e22e">Resize</span> <span style="color:#e6db74">&#34;600x&#34;</span>).<span style="color:#a6e22e">RelPermalink</span> }}
</span></span></code></pre></div><p>We&rsquo;re using some of <a href="https://gohugo.io/content-management/image-processing/">Hugo&rsquo;s image-processing methods</a> here.</p>
<ol>
<li>Because we wanted equally sized images, we employ the <code>.Crop</code> method to first take our image and crop it to 1200x800.</li>
<li>Because the image will be used in a grid layout where it will be smaller, we then resize our cropped image to half size using the <code>Resize</code> method. This will help with page load time.</li>
<li>Finally, we&rsquo;re returning the permalink for the now-processed image. You can and should tweak the crop size and the resize to your liking.</li>
</ol>
<h2 id="conclusion">Conclusion</h2>
<p>Once you&rsquo;ve set up these layouts, the only thing you will <em>ever</em> have to write is:</p>
<ul>
<li>The <code>featured_image</code> and <code>featured_alt</code> parameters in your page front matter.</li>
<li>The default <code>post_image</code> and <code>post_image_alt</code> in your config file as a fallback.</li>
</ul>
<p>Hopefully, this helped you learn something about using creating image layouts in Hugo. You can focus entirely on your content and let Hugo and your layouts do the work for you.</p>
<h3 id="next-steps">Next Steps</h3>
<p>If you&rsquo;ve got this down and want to do more with what you&rsquo;ve learned, here are two small project ideas:</p>
<ul>
<li>Rewrite the <code>&lt;img&gt;&lt;/img&gt;</code> layouts using <code>&lt;figure&gt;&lt;/figure&gt;</code> tags. See if you can add an optional parameter for <code>figcaptions</code>.</li>
<li>Look over some of the other <a href="https://gohugo.io/content-management/image-processing/">image processing</a> methods that Hugo ships with. What other ones might you include?</li>
</ul>
<h3 id="an-easier-solution">An Easier Solution</h3>
<p>Finally, if you just want a simple and flexible Hugo theme that does all of this for you, check out <a href="https://github.com/rickwysocki/littleGhost">Little Ghost</a>.</p>


</div>


<footer class="mx-auto shadow-lg max-w-lg p-6 text-center sm:py-4 sm:flex sm:items-center sm:space-y-0 sm:space-x-6 mt-16 mb-4">
    
    <img class= "sm:mx-0 sm:shrink-0 mx-auto h-24 rounded-full" src="/images/bio-photo.png" />
    <div class="text-left">
      <h6 class="font-bold text-indigo-600">Rick Wysocki</h6>
      <p class="text-gray-600">Assistant Teaching Professor</p>
      <p>I am a professor at Ball State University. I&#39;m passionate about effective communication, research, and information design. My free time is spent learning new technologies, watching movies, and exploring new music.</p>
      <div class="flex gap-4 mt-2 text-xl text-indigo-600">
        <a href="mailto:rlwysockijr@gmail.com"><i class="fa fa-envelope"></i></a>
        <a href="https://github.com/rickwysocki"><i class="fa fa-github"></i></a>
        
        <a href="https://mas.to/@rickwysocki"><i class="fab fa-mastodon"></i></a>


    </div>
    </div>

</footer>
</div>

</body>
</html>
